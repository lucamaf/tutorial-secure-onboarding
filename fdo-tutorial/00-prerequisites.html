<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lab prerequisites :: Secure Edge device onboarding with RHEL and FDO</title>
    <link rel="canonical" href="https://luisarizmendi.github.io/tutorial-secure-onboarding/fdo-tutorial/00-prerequisites.html">
    <link rel="prev" href="00-intro.html">
    <link rel="next" href="01-fdo-intro.html">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img src="../_/img/NewRHDFullLogo_4-color_white-wordmark.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="https://luisarizmendi.github.io/tutorial-secure-onboarding">Secure Edge device onboarding with RHEL and FDO</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/kubernetes-tutorial/" target="_blank">Kubernetes</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/istio-tutorial/" target="_blank">Istio</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/tekton-tutorial/" target="_blank">Tekton</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="fdo-tutorial" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html"></a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="00-intro.html">Introduction to secure edge device onboarding</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="00-intro.html#intro-scaling">Scaling device deployment for the edge</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="00-intro.html#intro-security">An additional concern: Device security</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="00-intro.html#intro-fdo">How FDO addresses these challenges</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="00-prerequisites.html">0. Lab prerequisites</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#virtualization">Prepare your virtualization environment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#arch">Choose your lab architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#usecase">Create your use case</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="01-fdo-intro.html">1.a FDO - Intro</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-fdo-intro.html#fdo-intro-origins">FDO&#8217;s origins</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-fdo-intro.html#fdo-intro-components">FDO components</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="01-fdo-intro.html#fdo-intro-workflow">FDO workflow</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="01-fdo-intro.html#fdo-intro-workflow-before">1. Before the first boot</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="01-fdo-intro.html#fdo-intro-workflow-during">2. During the first boot</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="01-fdo-intro.html#fdo-intro-workflow-after">3. After the first boot</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="01-fdo-lab.html">1.b FDO - Lab</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="01-fdo-lab.html#fdo-services">FDO services</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="01-fdo-lab.html#fdo-services-aio">Option 1: All-in-one FDO server installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="01-fdo-lab.html#fdo-services-dedicated">Option 2: Dedicated FDO servers</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="01-fdo-lab.html#fdo-config">FDO Service API config</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="01-fdo-lab.html#fdo-optiona">Option A: Creating your own use case</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="01-fdo-lab.html#fdo-optiona-user">initial_user</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="01-fdo-lab.html#fdo-optiona-files">files</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="01-fdo-lab.html#fdo-optiona-commands">commands</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="01-fdo-lab.html#fdo-optiona-encrypt">diskencryption_clevis</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="01-fdo-lab.html#fdo-optionb">Option B: Using the example use case</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="02-rfe-intro.html">2.a RHEL OSTree images - Intro</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-rfe-intro.html#rfe-intro-benefits">OSTree RHEL benefits for edge computing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-rfe-intro.html#rfe-intro-article">OSTree-based Operating Systems article</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="02-rfe-lab.html">2.b RHEL OSTree images - Lab</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-rfe-lab.html#rfe-imagebuilder">Install Image builder</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="02-rfe-lab.html#rfe-image">Create the RHEL OSTree image</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="02-rfe-lab.html#rfe-ostreeimage">Generating the repo image</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="02-rfe-lab.html#rfe-publish">Publishing the repo image</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-rfe-lab.html#rfe-iso">Create the RHEL ISO</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="03-onboarding.html">3. Edge device onboarding - Lab</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-onboarding.html#onboard-vm">Creating the edge device VM</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-onboarding.html#onboard-fdoclient">FDO client in action</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-onboarding.html#onboard-fdoservers">FDO server side</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-onboarding.html#onboard-checks">Checking the edge device onboard</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="99-summary.html">Summary</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Secure Edge device onboarding with RHEL and FDO</a></li>
    <li><a href="00-prerequisites.html">0. Lab prerequisites</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/luisarizmendi/tutorial-secure-onboarding/edit/master/documentation/modules/ROOT/pages/00-prerequisites.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Lab prerequisites</h1>
<div class="sect1">
<h2 id="tldr"><a class="anchor" href="#tldr"></a>TL/DR</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This lab has been created trying to minimize the pre-requisites. You should be able to run it using just your own (modern) laptop with any Hypervisor installed on it (lab tested with <code>libvirt</code>).</p>
</div>
<div class="paragraph">
<p>Summary of minimal system pre-requisites:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Virtualization hypervisor with at least 6 vCPUs (threads), 8 GB memory and 100 GB disk.</p>
</li>
<li>
<p>Internet connection from VMs.</p>
</li>
<li>
<p>Valid RHEL subscriptions and account.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="virtualization"><a class="anchor" href="#virtualization"></a>Prepare your virtualization environment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Although you can use the steps shown in this tutorial to onboard RHEL on baremetal devices, for simplicity, we will be using virtual machines for this lab, so you will need to have a pre-configured hypervisor where we will be running the required servers and edge devices.</p>
</div>
<div class="paragraph">
<p>If you are using Linux, you can install and enable <code>libvirt</code> with these commands:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sudo dnf -y install libguestfs-tools-c libvirt-daemon-config-network libvirt-daemon-kvm libvirt qemu-kvm virt-install virt-manager virt-viewer

sudo systemctl enable --now libvirtd</code></pre>
</div>
</div>
<div class="paragraph">
<p>Depending on the use case or configuration that you want to follow during this lab, you could need to add "special" devices to your edge VM, for example, you probably would like to use a virtual TPM to manage keys as you will be doing it with physical devices on real edge environments.</p>
</div>
<div class="paragraph">
<p>This lab could be run completly offline, but in order to avoid creating local repositories we will be connecting to the public ones, so you will need Internet access from your VMs.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="arch"><a class="anchor" href="#arch"></a>Choose your lab architecture</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The lab environment will be composed by an edge device and one or multiple servers (image-builder and FDO services). You can deploy all servers in a single VM (Option 1) if you are short in CPU/MEM resources in your hypervisor (laptop?) or you can split services in dedicated VMs (Option 2) to try a more "realistic" architecture.</p>
</div>
<div class="sect2">
<h3 id="_option_1_all_in_one_server"><a class="anchor" href="#_option_1_all_in_one_server"></a>Option 1: All-in-one server</h3>
<div class="paragraph">
<p>For this option you just need the minimial system requirements described in <a href="#tldr">TL/DR section</a>.</p>
</div>
<div class="paragraph">
<p>You will also need to <a href="https://access.redhat.com/downloads/content/479/ver=/rhel---9/9.1/x86_64/product-software">download a RHEL ISO</a> (At this moment, the latest one is RHEL 9.1).</p>
</div>
<div class="paragraph">
<p>Once you have <code>libvirt</code> or any other hypervisor installed, and your RHEL ISO downloaded, you can create a VM (I recommend using`virt-manager` in case of <code>libvirt</code>) with <strong>2 vCPUs, 4 GB memory and 50 GB disk</strong> using the "Local install media" option selecting the RHEL ISO.</p>
</div>
<div class="paragraph">
<p>During the RHEL 9 install wizard you can introduce your Red Hat account to register your system, so when the installation finishs your RHEL will be already subscribed. If you decide to use RHEL 8, you will need to subscribe your VM using <code>subscription-manager</code> manually after the first install.</p>
</div>
<div class="paragraph">
<p>Select the minimal install to save some disk space.</p>
</div>
<div class="paragraph">
<p>If you want to be sure that you VM has access to Internet, check if you get a <code>HTML code 200</code> when you ask for a web page, for example running this command in your RHEL VM:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -LsI redhat.com | grep HTTP | tail -n 1</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition to that RHEL VM, you will need to create an additional VM (min <strong>2 vCPUs, 1.5 GB memory, 20GB disk</strong>) during the lab steps (please, do not create it yet, just take into account that you will need those system resources).</p>
</div>
<div class="paragraph">
<p>In summary, for Option 1 you will need to have this VM installed and prepared:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>1x Red Hat Enterprise Linux 8/9 VM minimal-install subscribed (2 vCPUs, 4 GB memory, 50 GB disk)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>and you will need enough resources to create the following VM during the lab steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>1x Empty VM with UEFI boot enabled (2 vCPUs, 1.5 GB memory, 20GB disk)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_option_2_dedicated_server_vms"><a class="anchor" href="#_option_2_dedicated_server_vms"></a>Option 2: Dedicated server VMs</h3>
<div class="paragraph">
<p>If your hypervisor system has enough CPU and RAM, you probably would like to use a more realistic architecture, where the FDO services are running in dedicated servers. In this case, you will still need the VMs shown in "Option 1", but you will need to run three additional VMs.</p>
</div>
<div class="paragraph">
<p>For Option 2 you will need to have this VM installed and prepared:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>1x Red Hat Enterprise Linux 8/9 VM minimal-install subscribed (2 vCPUs, 4 GB memory, 50 GB disk)</p>
</li>
<li>
<p>3x Red Hat Enterprise Linux 8/9 VM minimal-install subscribed (2 vCPUs, 2 GB memory, 50 GB disk)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>and you will need enough resources to create the following VM during the lab steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>1x Empty VM with UEFI boot enabled (2 vCPUs, 1.5 GB memory, 20GB disk)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="usecase"><a class="anchor" href="#usecase"></a>Create your use case</h2>
<div class="sectionbody">
<div class="paragraph">
<p>During the Edge device onboarding, you will be able to run an associated automation as part of that first boot. Although in this lab we present an example where the VM will be configured with a random hostname, registered in Insights and configured with several custom scripts, the idea is that you don&#8217;t use that example.</p>
</div>
<div class="paragraph">
<p>This tutorial shouldn&#8217;t be a copy/paste lab. <strong>The idea is to enable you to create your own device onboarding use case</strong>, so you will need to have one already prepared and that you will use to "inject" it as part of the onboarding process (thanks to FDO).</p>
</div>
<div class="paragraph">
<p>Proably you will need to addapt your automation to the way that FDO is working and that&#8217;s <strong>the main goal of this tuturial, that you can get any automation and know how to addapt it in order to "process" it during device onboarding when using FDO</strong>.</p>
</div>
<div class="paragraph">
<p>If you don&#8217;t have already any automation that you would like to use, you could think in advance an automation that you would like to test during the edge device onboarding. Some examples could be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Include the edge device in Ansible Automation Platform and run a job right after onboading</p>
</li>
<li>
<p>Install Microshift and import it into ACM</p>
</li>
<li>
<p>Run OpenScap automatically or taks associated to system hardening</p>
</li>
<li>
<p>Launch an ansible playbook locally to configure additional external systems</p>
</li>
<li>
<p>Run the first boot configuration (maybe in external systems?) of any service running on the edge system (ie. observability, monitoring, logging, &#8230;&#8203; )</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Be creative! but please have your automation prepared before the lab, so you can focus on the FDO concepts instead of debugging Ansible or Bash scripts</strong>.</p>
</div>
<div class="paragraph">
<p>In case that you don&#8217;t have enough imagination, you can proceed using the example that is presented during the lab steps.</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="00-intro.html">Introduction to secure edge device onboarding</a></span>
  <span class="next"><a href="01-fdo-intro.html">1.a FDO - Intro</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../_/js/vendor/clipboard.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
